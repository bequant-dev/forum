# Discourse Configuration for BeQuant Community Forum
# This file contains the configuration for Discourse deployment on Railway

# Basic Configuration
DISCOURSE_HOSTNAME=forum.bequant.com
DISCOURSE_DEVELOPER_EMAILS=admin@bequant.com

# Database Configuration (Railway PostgreSQL)
DISCOURSE_DB_HOST=${DATABASE_HOST}
DISCOURSE_DB_NAME=${DATABASE_NAME}
DISCOURSE_DB_USERNAME=${DATABASE_USERNAME}
DISCOURSE_DB_PASSWORD=${DATABASE_PASSWORD}
DISCOURSE_DB_PORT=5432

# Redis Configuration (Railway Redis)
DISCOURSE_REDIS_HOST=${REDIS_HOST}
DISCOURSE_REDIS_PORT=${REDIS_PORT}
DISCOURSE_REDIS_PASSWORD=${REDIS_PASSWORD}

# Email Configuration
DISCOURSE_SMTP_ADDRESS=${DISCOURSE_SMTP_ADDRESS}
DISCOURSE_SMTP_PORT=${DISCOURSE_SMTP_PORT}
DISCOURSE_SMTP_USER_NAME=${DISCOURSE_SMTP_USER_NAME}
DISCOURSE_SMTP_PASSWORD=${DISCOURSE_SMTP_PASSWORD}
DISCOURSE_SMTP_ENABLE_START_TLS=${DISCOURSE_SMTP_ENABLE_START_TLS}
DISCOURSE_SMTP_DOMAIN=${DISCOURSE_SMTP_DOMAIN}

# Site Configuration
DISCOURSE_SITE_TITLE=BeQuant Community Forum
DISCOURSE_SITE_DESCRIPTION=Join the BeQuant community for interview prep
DISCOURSE_SITE_LOGO_URL=https://bequant.com/logo.png

# Security Settings
DISCOURSE_FORCE_HTTPS=true
DISCOURSE_USE_CDN=true

# Performance Settings
DISCOURSE_MAX_REPLIES_PER_POST=1000
DISCOURSE_MAX_POST_LENGTH=50000
DISCOURSE_MAX_TOPIC_LENGTH=1000

# User Settings
DISCOURSE_MIN_POST_LENGTH=20
DISCOURSE_MIN_TOPIC_LENGTH=15
DISCOURSE_MIN_POSTS_TO_READ=1

# Notification Settings
DISCOURSE_ENABLE_EMAIL_NOTIFICATIONS=true
DISCOURSE_ENABLE_PUSH_NOTIFICATIONS=true

# Authentication Configuration (Clerk OAuth2)
DISCOURSE_ENABLE_OAUTH2=true
DISCOURSE_OAUTH2_CLIENT_ID=${CLERK_OAUTH2_CLIENT_ID}
DISCOURSE_OAUTH2_CLIENT_SECRET=${CLERK_OAUTH2_CLIENT_SECRET}
DISCOURSE_OAUTH2_AUTHORIZE_URL=https://clerk.bequant.dev/oauth/authorize
DISCOURSE_OAUTH2_TOKEN_URL=https://clerk.bequant.dev/oauth/token
DISCOURSE_OAUTH2_USER_INFO_URL=https://clerk.bequant.dev/oauth/userinfo
DISCOURSE_OAUTH2_EMAIL_VERIFIED=true
DISCOURSE_OAUTH2_OVERRIDE_EMAIL=true
DISCOURSE_OAUTH2_OVERRIDE_USERNAME=true
DISCOURSE_OAUTH2_OVERRIDE_NAME=true
DISCOURSE_OAUTH2_OVERRIDE_AVATAR=true

# Email Registration (Fallback)
DISCOURSE_ENABLE_LOCAL_LOGINS=true
DISCOURSE_ENABLE_SIGNUP=true
DISCOURSE_ENABLE_EMAIL_VERIFICATION=true
DISCOURSE_EMAIL_VERIFICATION_REQUIRED=true

# Plugin Settings
DISCOURSE_ENABLE_PLUGINS=true
DISCOURSE_PLUGINS=discourse-solved,discourse-reactions,discourse-calendar

# Theme Settings
DISCOURSE_ENABLE_CUSTOM_THEMES=true
DISCOURSE_DEFAULT_THEME_ID=1

# Analytics
# DISCOURSE_GOOGLE_ANALYTICS_ID=${GOOGLE_ANALYTICS_ID}
# DISCOURSE_GOOGLE_TAG_MANAGER_ID=${GOOGLE_TAG_MANAGER_ID}

# Database Optimization for Railway
DISCOURSE_DB_POOL_SIZE=10
DISCOURSE_DB_STATEMENT_TIMEOUT=30000
DISCOURSE_DB_IDLE_IN_TRANSACTION_SESSION_TIMEOUT=30000 